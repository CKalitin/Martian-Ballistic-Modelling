import sim
import numpy as np

# Phoenix Entry:
phoenix = [
    # Velocity (m/s)
    np.array([
    5873, 5884, 5895, 5895, 5884, 5861, 5828, 5773, 5706, 5573, 5452, 5330,
    5075, 4787, 4488, 4199, 3934, 3335, 2659, 2183, 1850, 1496, 1263, 1030,
    765, 654, 554, 476, 410, 355, 299, 199, 122, 78, 66, 55, 0
    ]),
    # Altitude (m)
    np.array([
    123545, 104182, 93273, 73909, 70091, 64909, 60273, 56182, 52909, 49091,
    46909, 45000, 42273, 39818, 38182, 36545, 35182, 32455, 30000, 28091,
    26727, 25091, 23727, 22091, 19636, 18273, 16636, 15273, 13636, 12000,
    9818, 9273, 8727, 7636, 5727, 1364, 0
    ]),
    "Phoenix"
]

# Opportunity Entry:
opportunity = [
    # Velocity (m/s)
    np.array([
    5537, 5548, 5548, 5548, 5559, 5559, 5559, 5548, 5537, 5515, 5481, 5426, 5359, 5259, 5182, 5082, 4960, 4827, 4682, 4549, 4405, 4261, 4117, 3972, 3828, 3673, 3528, 3384, 3307, 2430, 2275, 2119, 1975, 1820, 1675, 1520, 1376, 1232, 1087, 943, 810, 677, 610, 510, 455, 411, 377, 333, 89, 78, 67, 67, 33
    ]),
    # Altitude (m)
    np.array([
    123497, 117486, 112295, 99454, 93443, 87432, 81421, 75683, 69945, 64208, 60383, 57104, 53825, 50820, 48634, 47268, 45355, 43716, 42077, 40984, 39891, 38525, 37705, 36885, 35792, 34973, 34153, 33607, 33060, 28689, 28142, 27322, 26503, 25683, 24863, 24044, 22951, 21858, 20765, 19399, 17760, 15847, 14754, 12568, 11202, 10383, 10383, 10109, 7650, 6831, 3279, 1639, 546
    ]),
    "Opportunity"
]

# Curiosity Entry:
curiosity = [
    # Velocity (m/s)
    np.array([
    466, 521, 621, 721, 832, 943, 1021, 1098, 1176, 1243, 1320, 1398, 1476, 1553, 1631, 1709, 1786, 1864, 1942, 2008, 2086, 2164, 2241, 2308, 2386, 2463, 2530, 2607, 2685, 2752, 2829, 2907, 2974, 3051, 3129, 3196, 3273, 3340, 3417, 3484, 3562, 3628, 3706, 3773, 3839, 3917, 3983, 4061, 4128, 4194, 4261, 4338, 4405, 4472, 4538, 4605, 4682, 4738, 4816, 4871, 4949, 5126, 5193, 5259, 5326, 5381, 5448, 5503, 5548, 5581, 5614, 5637, 5659, 5670, 5681, 5703, 5692, 5681, 5670, 5659, 5648, 5648, 5648, 5648, 5659, 5670, 5681, 5681, 5614, 5603, 5603, 5603, 5592, 5592, 5592, 5592, 5592, 5592, 5581, 5581, 5581, 5592, 5592, 5581, 5592, 5592, 5592, 5592, 5603, 5603, 5603, 5603, 5614, 5614
    ]),
    # Altitude (m)
    np.array([
    12022, 13388, 14208, 14754, 14754, 14754, 14208, 14208, 14208, 13934, 13934, 13934, 13934, 13934, 13934, 13934, 13934, 14208, 14208, 14208, 14208, 14481, 14481, 14754, 14754, 15027, 15301, 15574, 15847, 15847, 15847, 16120, 16393, 16667, 16940, 16940, 17486, 17760, 18033, 18306, 18579, 18852, 19399, 19399, 19945, 20492, 20765, 21038, 21585, 21858, 22404, 22951, 23224, 23770, 24317, 24863, 25410, 25956, 26503, 27322, 27596, 30055, 31148, 31967, 33333, 34426, 35792, 37158, 38798, 40437, 42077, 43989, 45902, 47814, 49454, 51366, 53825, 55738, 57377, 59290, 60929, 62842, 64754, 66667, 68306, 70219, 71858, 73770, 77049, 78689, 80601, 82514, 84426, 86066, 87978, 89891, 91803, 93716, 95628, 97541, 99180, 101093, 103005, 104645, 106557, 108470, 110383, 112295, 113934, 115847, 117760, 119672, 121585, 123224
    ]),
    "Curiosity"
]

# Pathfinder Entry:
pathfinder = [
    # Velocity (m/s)
    np.array([
    344, 566, 777, 1032, 1243, 1454, 1675, 1997, 2330, 2652, 2985, 3318, 3639, 4028, 4361, 4682, 5015, 5359, 5681, 6003, 6313, 6513, 6713, 6857, 7046, 7212, 7345, 7401, 7445, 7467, 7479, 7490, 7490, 7479, 7479, 7479, 7479, 7467, 7467
    ]),
    # Altitude (m)
    np.array([
    7104, 10929, 13115, 14754, 16120, 16940, 18033, 19126, 20219, 21311, 22131, 23224, 24317, 25410, 26503, 27596, 28689, 30328, 31694, 33060, 35246, 36612, 38525, 39891, 42623, 45628, 50000, 53552, 57650, 62842, 69945, 75410, 82514, 89344, 96175, 103279, 107650, 115847, 121585
    ]),
    "Pathfinder"
]

# Viking Entry:
viking = [
    # Velocity (m/s)
    np.array([
    311, 344, 355, 388, 544, 599, 655, 732, 766, 799, 1121, 1154, 1187, 1376, 1564, 1886, 2264, 2441, 2619, 2785, 2963, 3118, 3284, 3639, 3917, 4072, 4172, 4361, 4449, 4483, 4527, 4516, 4516, 4516, 4516
    ]),
    # Altitude (m)
    np.array([
    12842, 15027, 16120, 17486, 22678, 23770, 24317, 24863, 25137, 25410, 25683, 25683, 25683, 25683, 25683, 26503, 27596, 27869, 28415, 29235, 29781, 30874, 31694, 34426, 37432, 39617, 41257, 46448, 50546, 54645, 63115, 67486, 72131, 75683, 78962
    ]),
    "Viking"
]

curiosity_data = sim.simulate(
    time_step=0.01,
    time_max=1000,
    mass=3300,
    area=15.9,
    entry_altitude=125000,
    entry_flight_path_angle=-14,
    entry_velocity=5850,
    verbose=False,
)

phoenix_data = sim.simulate(
    time_step=0.01,
    time_max=1000,
    mass=520,
    area=15.9,
    entry_altitude=125000,
    entry_flight_path_angle=-13,
    entry_velocity=5600,
    verbose=False,
)

# Opportunity
opportunity_data = sim.simulate(
    time_step=0.01,
    time_max=1000,
    mass=827,
    area=15.9,
    entry_altitude=125000,
    entry_flight_path_angle=-14,
    entry_velocity=5550,
    verbose=False,
)

sim.plot(opportunity_data, "Opportunity Mars Entry Simulation", filename="backtest/Opportunity.png", comparisons=[opportunity], show=False)
sim.plot(curiosity_data, "Curiosity Mars Entry Simulation", filename="backtest/Curiosity.png", comparisons=[opportunity], show=False)